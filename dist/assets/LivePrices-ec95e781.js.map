{"version":3,"file":"LivePrices-ec95e781.js","sources":["../../src/utils/api.jsx","../../src/components/LivePrices.jsx"],"sourcesContent":["/**\n * Crypto API Utilities with Enhanced Error Handling and Caching\n */\n\n// Configuration constants\nconst API_CONFIG = {\n  baseUrl: 'https://api.coingecko.com/api/v3/simple/price',\n  defaultIds: ['bitcoin', 'ethereum', 'tether', 'usd-coin', 'binancecoin', 'ripple'],\n  vsCurrency: 'usd',\n  cacheTTL: 10000, // 10 seconds\n  retryCount: 2,\n  retryDelay: 1000\n};\n\n// Crypto metadata mapping\nconst CRYPTO_METADATA = {\n  bitcoin: { name: 'Bitcoin', symbol: 'BTC' },\n  ethereum: { name: 'Ethereum', symbol: 'ETH' },\n  tether: { name: 'Tether', symbol: 'USDT' },\n  'usd-coin': { name: 'USD Coin', symbol: 'USDC' },\n  binancecoin: { name: 'BNB', symbol: 'BNB' },\n  ripple: { name: 'XRP', symbol: 'XRP' }\n};\n\n// Cache implementation\nlet apiCache = {\n  data: null,\n  timestamp: 0\n};\n\n// Export the fetch function\nexport async function fetchCryptoData(params = {}) {\n  try {\n    // Use cache if available and valid\n    if (apiCache.data && Date.now() - apiCache.timestamp < API_CONFIG.cacheTTL) {\n      return apiCache.data;\n    }\n\n    // Configure request parameters\n    const requestParams = {\n      ids: params.ids || API_CONFIG.defaultIds.join(','),\n      vs_currencies: API_CONFIG.vsCurrency,\n      include_24hr_change: true\n    };\n\n    // Build URL with parameters\n    const url = new URL(API_CONFIG.baseUrl);\n    Object.entries(requestParams).forEach(([key, value]) => {\n      url.searchParams.append(key, value);\n    });\n\n    // Retry logic implementation\n    let response;\n    for (let i = 0; i < API_CONFIG.retryCount; i++) {\n      try {\n        response = await fetch(url);\n        if (response.ok) break;\n      } catch (error) {\n        if (i === API_CONFIG.retryCount - 1) throw error;\n        await new Promise(resolve => setTimeout(resolve, API_CONFIG.retryDelay));\n      }\n    }\n\n    if (!response.ok) {\n      const errorBody = await response.text();\n      throw new Error(`API request failed: ${response.status} - ${errorBody}`);\n    }\n\n    const data = await response.json();\n    \n    // Update cache\n    apiCache = {\n      data,\n      timestamp: Date.now()\n    };\n\n    return data;\n  } catch (error) {\n    reportError(error, 'fetchCryptoData');\n    throw error;\n  }\n}\n\n// Export the format function\nexport function formatCryptoData(data) {\n  try {\n    if (!data || typeof data !== 'object') {\n      throw new Error('Invalid data format received');\n    }\n\n    return Object.entries(data).map(([id, values]) => {\n      const metadata = CRYPTO_METADATA[id] || { name: id.toUpperCase(), symbol: id.slice(0, 4).toUpperCase() };\n      \n      return {\n        id,\n        name: metadata.name,\n        symbol: metadata.symbol,\n        price: values[API_CONFIG.vsCurrency] || 0,\n        change: values[`${API_CONFIG.vsCurrency}_24h_change`] || 0\n      };\n    });\n  } catch (error) {\n    reportError(error, 'formatCryptoData');\n    return [];\n  }\n}\n\n// Utility functions (keep window attachments if needed)\nwindow.fetchCryptoData = fetchCryptoData;\nwindow.formatCryptoData = formatCryptoData;\n\nwindow.getCryptoName = function(id) {\n  return CRYPTO_METADATA[id]?.name || id.toUpperCase();\n};\n\nwindow.formatPrice = function(price) {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 4\n  }).format(price);\n};\n\nwindow.refreshCryptoData = function() {\n  apiCache = { data: null, timestamp: 0 };\n};\n\n// Error reporting\nwindow.reportError = function(error, context = 'api') {\n  console.error(`[API Error] ${context}:`, error);\n};\n","import { useState, useEffect } from 'react'\nimport { ArrowPathIcon } from '@heroicons/react/24/outline'\nimport { fetchCryptoData, formatCryptoData } from '../utils/api'\n\nconst LivePrices = () => {\n  const [prices, setPrices] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  const fetchPrices = async () => {\n    try {\n      setLoading(true)\n      const data = await fetchCryptoData()\n      setPrices(formatCryptoData(data))\n      setError(null)\n    } catch (err) {\n      setError('Failed to fetch prices. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchPrices()\n    const interval = setInterval(fetchPrices, 30000)\n    return () => clearInterval(interval)\n  }, [])\n\n  return (\n    <section id=\"prices\" className=\"py-24 bg-gradient-to-b from-primary-black to-primary-950\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-16\">\n          <h2 className=\"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-orange to-primary-gold bg-clip-text text-transparent mb-4\">\n            Live Crypto Prices\n          </h2>\n          <p className=\"text-xl text-secondary-light max-w-2xl mx-auto\">\n            Real-time cryptocurrency prices updated every 30 seconds\n          </p>\n        </div>\n\n        {loading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 animate-pulse\">\n            {[...Array(6)].map((_, i) => (\n              <div key={i} className=\"h-20 bg-secondary-gray rounded-xl\" />\n            ))}\n          </div>\n        ) : error ? (\n          <div className=\"text-center py-8 space-y-4\">\n            <p className=\"text-red-500\">{error}</p>\n            <button\n              onClick={fetchPrices}\n              className=\"button-primary flex items-center gap-2 mx-auto\"\n            >\n              <ArrowPathIcon className=\"w-5 h-5\" />\n              Retry\n            </button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {prices.map((coin) => (\n              <div\n                key={coin.id}\n                className=\"p-6 bg-black/50 rounded-xl backdrop-blur-lg border border-orange-500/20 hover:border-orange-500/40 transition-all\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-xl font-semibold\">{coin.name}</h3>\n                    <p className=\"text-sm text-secondary-light\">{coin.symbol}</p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-lg font-medium\">${coin.price.toFixed(2)}</p>\n                    <p className={`text-sm ${coin.change >= 0 ? 'text-green-500' : 'text-red-500'}`}>\n                      {coin.change >= 0 ? '+' : ''}{coin.change.toFixed(2)}%\n                    </p>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default LivePrices\n"],"names":["API_CONFIG","CRYPTO_METADATA","apiCache","fetchCryptoData","params","requestParams","url","key","value","response","i","error","resolve","errorBody","data","formatCryptoData","id","values","metadata","_a","price","context","LivePrices","prices","setPrices","useState","loading","setLoading","setError","fetchPrices","useEffect","interval","jsx","jsxs","_","ArrowPathIcon","coin"],"mappings":"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"}