import{r as d,j as e}from"./index-c5d6fa23.js";import{A as x}from"./ArrowPathIcon-fc547f42.js";const o={baseUrl:"https://api.coingecko.com/api/v3/simple/price",defaultIds:["bitcoin","ethereum","tether","usd-coin","binancecoin","ripple"],vsCurrency:"usd",cacheTTL:1e4,retryCount:2,retryDelay:1e3},p={bitcoin:{name:"Bitcoin",symbol:"BTC"},ethereum:{name:"Ethereum",symbol:"ETH"},tether:{name:"Tether",symbol:"USDT"},"usd-coin":{name:"USD Coin",symbol:"USDC"},binancecoin:{name:"BNB",symbol:"BNB"},ripple:{name:"XRP",symbol:"XRP"}};let m={data:null,timestamp:0};async function u(a={}){try{if(m.data&&Date.now()-m.timestamp<o.cacheTTL)return m.data;const r={ids:a.ids||o.defaultIds.join(","),vs_currencies:o.vsCurrency,include_24hr_change:!0},c=new URL(o.baseUrl);Object.entries(r).forEach(([n,i])=>{c.searchParams.append(n,i)});let s;for(let n=0;n<o.retryCount;n++)try{if(s=await fetch(c),s.ok)break}catch(i){if(n===o.retryCount-1)throw i;await new Promise(t=>setTimeout(t,o.retryDelay))}if(!s.ok){const n=await s.text();throw new Error(`API request failed: ${s.status} - ${n}`)}const l=await s.json();return m={data:l,timestamp:Date.now()},l}catch(r){throw reportError(r,"fetchCryptoData"),r}}function h(a){try{if(!a||typeof a!="object")throw new Error("Invalid data format received");return Object.entries(a).map(([r,c])=>{const s=p[r]||{name:r.toUpperCase(),symbol:r.slice(0,4).toUpperCase()};return{id:r,name:s.name,symbol:s.symbol,price:c[o.vsCurrency]||0,change:c[`${o.vsCurrency}_24h_change`]||0}})}catch(r){return reportError(r,"formatCryptoData"),[]}}window.fetchCryptoData=u;window.formatCryptoData=h;window.getCryptoName=function(a){var r;return((r=p[a])==null?void 0:r.name)||a.toUpperCase()};window.formatPrice=function(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}).format(a)};window.refreshCryptoData=function(){m={data:null,timestamp:0}};window.reportError=function(a,r="api"){console.error(`[API Error] ${r}:`,a)};const b=()=>{const[a,r]=d.useState([]),[c,s]=d.useState(!0),[l,n]=d.useState(null),i=async()=>{try{s(!0);const t=await u();r(h(t)),n(null)}catch{n("Failed to fetch prices. Please try again.")}finally{s(!1)}};return d.useEffect(()=>{i();const t=setInterval(i,3e4);return()=>clearInterval(t)},[]),e.jsx("section",{id:"prices",className:"py-24 bg-gradient-to-b from-primary-black to-primary-950",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-orange to-primary-gold bg-clip-text text-transparent mb-4",children:"Live Crypto Prices"}),e.jsx("p",{className:"text-xl text-secondary-light max-w-2xl mx-auto",children:"Real-time cryptocurrency prices updated every 30 seconds"})]}),c?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-pulse",children:[...Array(6)].map((t,y)=>e.jsx("div",{className:"h-20 bg-secondary-gray rounded-xl"},y))}):l?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"text-red-500",children:l}),e.jsxs("button",{onClick:i,className:"button-primary flex items-center gap-2 mx-auto",children:[e.jsx(x,{className:"w-5 h-5"}),"Retry"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(t=>e.jsx("div",{className:"p-6 bg-black/50 rounded-xl backdrop-blur-lg border border-orange-500/20 hover:border-orange-500/40 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-secondary-light",children:t.symbol})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-medium",children:["$",t.price.toFixed(2)]}),e.jsxs("p",{className:`text-sm ${t.change>=0?"text-green-500":"text-red-500"}`,children:[t.change>=0?"+":"",t.change.toFixed(2),"%"]})]})]})},t.id))})]})})};export{b as default};
//# sourceMappingURL=LivePrices-ac9827fa.js.map
