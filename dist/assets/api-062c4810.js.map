{"version":3,"file":"api-062c4810.js","sources":["../../node_modules/@heroicons/react/24/outline/esm/ArrowPathIcon.js","../../src/utils/api.jsx"],"sourcesContent":["import * as React from \"react\";\nfunction ArrowPathIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowPathIcon);\nexport default ForwardRef;","/**\n * Crypto API Utilities with Enhanced Features for CoinByte\n * - 5-second refresh capability\n * - Stablecoin-first data structure\n * - African market focus\n */\n\n// API Configuration\nconst API_CONFIG = {\n  baseUrl: 'https://api.coingecko.com/api/v3/simple/price',\n  defaultIds: [\n    'bitcoin', 'ethereum', 'solana',\n    'tether', 'usd-coin', // USDT and USDC\n    'binancecoin', 'cardano', 'ripple',\n    'celo', 'stellar', 'celo-dollar' // African-focused assets\n  ],\n  vsCurrency: 'usd',\n  cacheTTL: 5000, // 5 seconds for live updates\n  retryCount: 3,\n  retryDelay: 500,\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\n\n// Enhanced crypto metadata with African market data\nconst CRYPTO_METADATA = {\n  bitcoin: { name: 'Bitcoin', symbol: 'BTC', type: 'crypto' },\n  ethereum: { name: 'Ethereum', symbol: 'ETH', type: 'crypto' },\n  tether: { name: 'Tether', symbol: 'USDT', type: 'stablecoin' },\n  'usd-coin': { name: 'USD Coin', symbol: 'USDC', type: 'stablecoin' },\n  solana: { name: 'Solana', symbol: 'SOL', type: 'crypto' },\n  celo: { name: 'Celo', symbol: 'CELO', type: 'crypto' },\n  'celo-dollar': { name: 'cUSD', symbol: 'cUSD', type: 'stablecoin' },\n  binancecoin: { name: 'BNB', symbol: 'BNB', type: 'crypto' },\n  ripple: { name: 'XRP', symbol: 'XRP', type: 'crypto' },\n  stellar: { name: 'Stellar', symbol: 'XLM', type: 'crypto' }\n};\n\n// Cache system with 5-second expiration\nlet apiCache = {\n  data: null,\n  timestamp: 0,\n  etag: null\n};\n\n// Enhanced fetch function with ETag support\nexport async function fetchCryptoData(params = {}) {\n  try {\n    // Return cached data if valid\n    if (apiCache.data && Date.now() - apiCache.timestamp < API_CONFIG.cacheTTL) {\n      return apiCache.data;\n    }\n\n    // Configure request parameters\n    const requestParams = {\n      ids: params.ids || API_CONFIG.defaultIds.join(','),\n      vs_currencies: API_CONFIG.vsCurrency,\n      include_24hr_change: true,\n      include_last_updated_at: true\n    };\n\n    // Build URL\n    const url = new URL(API_CONFIG.baseUrl);\n    Object.entries(requestParams).forEach(([key, value]) => {\n      url.searchParams.append(key, value);\n    });\n\n    // Configure request headers\n    const headers = new Headers(API_CONFIG.headers);\n    if (apiCache.etag) {\n      headers.append('If-None-Match', apiCache.etag);\n    }\n\n    let response;\n    for (let attempt = 0; attempt < API_CONFIG.retryCount; attempt++) {\n      try {\n        response = await fetch(url, { headers });\n        \n        // Handle 304 Not Modified\n        if (response.status === 304) {\n          apiCache.timestamp = Date.now();\n          return apiCache.data;\n        }\n        \n        if (response.ok) break;\n        \n      } catch (error) {\n        if (attempt === API_CONFIG.retryCount - 1) throw error;\n        await new Promise(resolve => setTimeout(resolve, API_CONFIG.retryDelay));\n      }\n    }\n\n    if (!response.ok) {\n      throw new Error(`API request failed: ${response.status}`);\n    }\n\n    // Update cache metadata\n    const newEtag = response.headers.get('ETag');\n    const data = await response.json();\n\n    apiCache = {\n      data,\n      timestamp: Date.now(),\n      etag: newEtag\n    };\n\n    return data;\n\n  } catch (error) {\n    reportError(error, 'fetchCryptoData');\n    throw error;\n  }\n}\n\n// Enhanced formatter with African market focus\nexport function formatCryptoData(data) {\n  try {\n    if (!data || typeof data !== 'object') {\n      throw new Error('Invalid data format');\n    }\n\n    return Object.entries(data)\n      .map(([id, values]) => {\n        const metadata = CRYPTO_METADATA[id] || { \n          name: id.toUpperCase(),\n          symbol: id.slice(0, 4).toUpperCase(),\n          type: 'crypto'\n        };\n\n        return {\n          id,\n          name: metadata.name,\n          symbol: metadata.symbol,\n          type: metadata.type,\n          price: values[API_CONFIG.vsCurrency] || 0,\n          change: values[`${API_CONFIG.vsCurrency}_24h_change`] || 0,\n          lastUpdated: values.last_updated_at || Date.now()\n        };\n      })\n      .sort((a, b) => {\n        // Prioritize stablecoins first\n        if (a.type === 'stablecoin' && b.type !== 'stablecoin') return -1;\n        if (b.type === 'stablecoin' && a.type !== 'stablecoin') return 1;\n        return 0;\n      });\n  } catch (error) {\n    reportError(error, 'formatCryptoData');\n    return [];\n  }\n}\n\n// Enhanced price formatting for African markets\nwindow.formatPrice = function(price, currency = 'USD') {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 4\n  }).format(price);\n};\n\n// New function for African currency conversion\nwindow.convertToLocalCurrency = function(amount, currencyCode) {\n  // Implementation would connect to CoinByte's FX rates API\n  return amount * 1; // Placeholder\n};\n\n// Error reporting with telemetry\nwindow.reportError = function(error, context = 'api') {\n  console.error(`[CoinByte API Error] ${context}:`, error);\n  // Add error tracking integration here\n};\n\n// Cache management utilities\nwindow.refreshCryptoData = function() {\n  apiCache = { data: null, timestamp: 0, etag: null };\n};\n\nwindow.getCacheStatus = function() {\n  return {\n    age: Date.now() - apiCache.timestamp,\n    size: apiCache.data ? Object.keys(apiCache.data).length : 0\n  };\n};\n\n// Type definitions for TypeScript users\n/**\n * @typedef {Object} CryptoData\n * @property {string} id\n * @property {string} name\n * @property {string} symbol\n * @property {'crypto'|'stablecoin'} type\n * @property {number} price\n * @property {number} change\n * @property {number} lastUpdated\n */\n"],"names":["ArrowPathIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","ArrowPathIcon$1","API_CONFIG","CRYPTO_METADATA","apiCache","fetchCryptoData","params","requestParams","url","key","value","headers","response","attempt","error","resolve","newEtag","data","formatCryptoData","id","values","metadata","a","b","price","currency","amount","currencyCode","context"],"mappings":"wCACA,SAASA,EAAc,CACrB,MAAAC,EACA,QAAAC,EACA,GAAGC,CACL,EAAGC,EAAQ,CACT,OAAoBC,gBAAoB,MAAO,OAAO,OAAO,CAC3D,MAAO,6BACP,KAAM,OACN,QAAS,YACT,YAAa,IACb,OAAQ,eACR,cAAe,OACf,YAAa,OACb,IAAKD,EACL,kBAAmBF,CACpB,EAAEC,CAAK,EAAGF,EAAqBI,EAAAA,cAAoB,QAAS,CAC3D,GAAIH,CACL,EAAED,CAAK,EAAI,KAAmBI,EAAAA,cAAoB,OAAQ,CACzD,cAAe,QACf,eAAgB,QAChB,EAAG,yKACJ,CAAA,CAAC,CACJ,CACA,MAAMC,EAA2BC,EAAAA,WAAiBP,CAAa,EAC/DQ,EAAeF,ECjBTG,EAAa,CACjB,QAAS,gDACT,WAAY,CACV,UAAW,WAAY,SACvB,SAAU,WACV,cAAe,UAAW,SAC1B,OAAQ,UAAW,aACrB,EACA,WAAY,MACZ,SAAU,IACV,WAAY,EACZ,WAAY,IACZ,QAAS,CACP,OAAU,mBACV,eAAgB,kBAClB,CACF,EAGMC,EAAkB,CACtB,QAAS,CAAE,KAAM,UAAW,OAAQ,MAAO,KAAM,QAAS,EAC1D,SAAU,CAAE,KAAM,WAAY,OAAQ,MAAO,KAAM,QAAS,EAC5D,OAAQ,CAAE,KAAM,SAAU,OAAQ,OAAQ,KAAM,YAAa,EAC7D,WAAY,CAAE,KAAM,WAAY,OAAQ,OAAQ,KAAM,YAAa,EACnE,OAAQ,CAAE,KAAM,SAAU,OAAQ,MAAO,KAAM,QAAS,EACxD,KAAM,CAAE,KAAM,OAAQ,OAAQ,OAAQ,KAAM,QAAS,EACrD,cAAe,CAAE,KAAM,OAAQ,OAAQ,OAAQ,KAAM,YAAa,EAClE,YAAa,CAAE,KAAM,MAAO,OAAQ,MAAO,KAAM,QAAS,EAC1D,OAAQ,CAAE,KAAM,MAAO,OAAQ,MAAO,KAAM,QAAS,EACrD,QAAS,CAAE,KAAM,UAAW,OAAQ,MAAO,KAAM,QAAS,CAC5D,EAGA,IAAIC,EAAW,CACb,KAAM,KACN,UAAW,EACX,KAAM,IACR,EAGsB,eAAAC,EAAgBC,EAAS,GAAI,CAC7C,GAAA,CAEE,GAAAF,EAAS,MAAQ,KAAK,MAAQA,EAAS,UAAYF,EAAW,SAChE,OAAOE,EAAS,KAIlB,MAAMG,EAAgB,CACpB,IAAKD,EAAO,KAAOJ,EAAW,WAAW,KAAK,GAAG,EACjD,cAAeA,EAAW,WAC1B,oBAAqB,GACrB,wBAAyB,EAAA,EAIrBM,EAAM,IAAI,IAAIN,EAAW,OAAO,EAC/B,OAAA,QAAQK,CAAa,EAAE,QAAQ,CAAC,CAACE,EAAKC,CAAK,IAAM,CAClDF,EAAA,aAAa,OAAOC,EAAKC,CAAK,CAAA,CACnC,EAGD,MAAMC,EAAU,IAAI,QAAQT,EAAW,OAAO,EAC1CE,EAAS,MACHO,EAAA,OAAO,gBAAiBP,EAAS,IAAI,EAG3C,IAAAQ,EACJ,QAASC,EAAU,EAAGA,EAAUX,EAAW,WAAYW,IACjD,GAAA,CAIE,GAHJD,EAAW,MAAM,MAAMJ,EAAK,CAAE,QAAAG,CAAS,CAAA,EAGnCC,EAAS,SAAW,IACb,OAAAR,EAAA,UAAY,KAAK,MACnBA,EAAS,KAGlB,GAAIQ,EAAS,GAAI,YAEVE,EAAO,CACV,GAAAD,IAAYX,EAAW,WAAa,EAAS,MAAAY,EACjD,MAAM,IAAI,QAAQC,GAAW,WAAWA,EAASb,EAAW,UAAU,CAAC,CACzE,CAGE,GAAA,CAACU,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAI1D,MAAMI,EAAUJ,EAAS,QAAQ,IAAI,MAAM,EACrCK,EAAO,MAAML,EAAS,OAEjB,OAAAR,EAAA,CACT,KAAAa,EACA,UAAW,KAAK,IAAI,EACpB,KAAMD,CAAA,EAGDC,QAEAH,EAAO,CACd,kBAAYA,EAAO,iBAAiB,EAC9BA,CACR,CACF,CAGO,SAASI,EAAiBD,EAAM,CACjC,GAAA,CACF,GAAI,CAACA,GAAQ,OAAOA,GAAS,SACrB,MAAA,IAAI,MAAM,qBAAqB,EAGhC,OAAA,OAAO,QAAQA,CAAI,EACvB,IAAI,CAAC,CAACE,EAAIC,CAAM,IAAM,CACf,MAAAC,EAAWlB,EAAgBgB,CAAE,GAAK,CACtC,KAAMA,EAAG,YAAY,EACrB,OAAQA,EAAG,MAAM,EAAG,CAAC,EAAE,YAAY,EACnC,KAAM,QAAA,EAGD,MAAA,CACL,GAAAA,EACA,KAAME,EAAS,KACf,OAAQA,EAAS,OACjB,KAAMA,EAAS,KACf,MAAOD,EAAOlB,EAAW,UAAU,GAAK,EACxC,OAAQkB,EAAO,GAAGlB,EAAW,UAAU,aAAa,GAAK,EACzD,YAAakB,EAAO,iBAAmB,KAAK,IAAI,CAAA,CAEnD,CAAA,EACA,KAAK,CAACE,EAAGC,IAEJD,EAAE,OAAS,cAAgBC,EAAE,OAAS,aAAqB,GAC3DA,EAAE,OAAS,cAAgBD,EAAE,OAAS,aAAqB,EACxD,CACR,QACIR,EAAO,CACd,mBAAYA,EAAO,kBAAkB,EAC9B,EACT,CACF,CAGA,OAAO,YAAc,SAASU,EAAOC,EAAW,MAAO,CAC9C,OAAA,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAAA,EACA,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAAE,OAAOD,CAAK,CACjB,EAGA,OAAO,uBAAyB,SAASE,EAAQC,EAAc,CAE7D,OAAOD,EAAS,CAClB,EAGA,OAAO,YAAc,SAASZ,EAAOc,EAAU,MAAO,CACpD,QAAQ,MAAM,wBAAwBA,CAAO,IAAKd,CAAK,CAEzD,EAGA,OAAO,kBAAoB,UAAW,CACpCV,EAAW,CAAE,KAAM,KAAM,UAAW,EAAG,KAAM,KAC/C,EAEA,OAAO,eAAiB,UAAW,CAC1B,MAAA,CACL,IAAK,KAAK,IAAI,EAAIA,EAAS,UAC3B,KAAMA,EAAS,KAAO,OAAO,KAAKA,EAAS,IAAI,EAAE,OAAS,CAAA,CAE9D","x_google_ignoreList":[0]}