import{r as l,j as t}from"./index-61eab228.js";function j({title:s,titleId:e,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},n),s?l.createElement("title",{id:e},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const C=l.forwardRef(j),v=C,c={baseUrl:"https://api.coingecko.com/api/v3/simple/price",defaultIds:["bitcoin","ethereum","solana","tether","usd-coin","binancecoin","cardano","ripple","celo","stellar","celo-dollar"],vsCurrency:"usd",cacheTTL:3e4,retryConfig:{maxAttempts:3,baseDelay:500,maxDelay:3e3},headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"CoinByte-Web/2.0 (African Markets)"}},f={bitcoin:{name:"Bitcoin",symbol:"BTC",type:"crypto",region:"global"},ethereum:{name:"Ethereum",symbol:"ETH",type:"crypto",region:"global"},tether:{name:"Tether",symbol:"USDT",type:"stablecoin",region:"global"},"usd-coin":{name:"USD Coin",symbol:"USDC",type:"stablecoin",region:"global"},solana:{name:"Solana",symbol:"SOL",type:"crypto",region:"global"},celo:{name:"Celo",symbol:"CELO",type:"crypto",region:"africa"},"celo-dollar":{name:"cUSD",symbol:"cUSD",type:"stablecoin",region:"africa"},binancecoin:{name:"BNB",symbol:"BNB",type:"crypto",region:"global"},ripple:{name:"XRP",symbol:"XRP",type:"crypto",region:"global"},stellar:{name:"Stellar",symbol:"XLM",type:"crypto",region:"africa"}};let i={data:null,timestamp:0,etag:null,regionStats:{africa:{lastUpdated:0,count:0},global:{lastUpdated:0,count:0}}};async function N(s={}){if(i.data&&Date.now()-i.timestamp<c.cacheTTL)return i.data;const n={ids:s.ids||c.defaultIds.join(","),vs_currencies:c.vsCurrency,include_24hr_change:!0,include_last_updated_at:!0,precision:"4"},a=new URL(c.baseUrl);Object.entries(n).forEach(([p,g])=>{a.searchParams.append(p,g)});const d=new Headers(c.headers);i.etag&&d.set("If-None-Match",i.etag);let o,m=0;const{maxAttempts:r,baseDelay:u,maxDelay:b}=c.retryConfig;for(;m<r;)try{if(o=await fetch(a,{headers:d}),o.status===304)return i.timestamp=Date.now(),i.data;if(o.ok)break}catch(p){if(++m===r)throw p;const g=Math.min(u*2**m,b);await new Promise(y=>setTimeout(y,g))}if(!o.ok)throw new Error(`API request failed: ${o.status}`);const w=o.headers.get("ETag"),h=await o.json(),x={africa:0,global:0};return Object.keys(h).forEach(p=>{var y;const g=((y=f[p])==null?void 0:y.region)||"global";x[g]++}),i={data:h,timestamp:Date.now(),etag:w,regionStats:{africa:{lastUpdated:Date.now(),count:x.africa},global:{lastUpdated:Date.now(),count:x.global}}},h}function D(s){return!s||typeof s!="object"?[]:Object.entries(s).map(([e,n])=>{const a=f[e]||{name:e.toUpperCase(),symbol:e.slice(0,4).toUpperCase(),type:"crypto",region:"global"};return{id:e,region:a.region,name:a.name,symbol:a.symbol,type:a.type,price:n[c.vsCurrency]||0,change:n[`${c.vsCurrency}_24h_change`]||0,lastUpdated:n.last_updated_at||Date.now()}}).sort((e,n)=>e.type==="stablecoin"&&n.type!=="stablecoin"?-1:n.type==="stablecoin"&&e.type!=="stablecoin"?1:n.region.localeCompare(e.region))}window.formatPrice=function(s,e="USD",n="en-US"){const a={style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:4};return e==="NGN"&&(a.maximumFractionDigits=2),e==="KES"&&(a.maximumFractionDigits=2),e==="GHS"&&(a.maximumFractionDigits=2),new Intl.NumberFormat(n,a).format(s)};window.refreshCryptoData=function(){i={...i,data:null,timestamp:0,etag:null}};window.reportError=function(s,e="api"){console.error(`[CoinByte Error] ${e}:`,s),typeof window.trackJs<"u"&&window.trackJs.track(s)};const S=()=>{const[s,e]=l.useState([]),[n,a]=l.useState(!0),[d,o]=l.useState(null),m=async()=>{try{a(!0);const r=await N();e(D(r)),o(null)}catch{o("Failed to fetch prices. Please try again.")}finally{a(!1)}};return l.useEffect(()=>{m();const r=setInterval(m,3e4);return()=>clearInterval(r)},[]),t.jsx("section",{id:"prices",className:"py-24 bg-gradient-to-b from-primary-black to-primary-950",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs("div",{className:"text-center mb-16",children:[t.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-orange to-primary-gold bg-clip-text text-transparent mb-4",children:"Live Crypto Prices"}),t.jsx("p",{className:"text-xl text-secondary-light max-w-2xl mx-auto",children:"Real-time cryptocurrency prices updated every 30 seconds"})]}),n?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-pulse",children:[...Array(6)].map((r,u)=>t.jsx("div",{className:"h-20 bg-secondary-gray rounded-xl"},u))}):d?t.jsxs("div",{className:"text-center py-8 space-y-4",children:[t.jsx("p",{className:"text-red-500",children:d}),t.jsxs("button",{onClick:m,className:"button-primary flex items-center gap-2 mx-auto",children:[t.jsx(v,{className:"w-5 h-5"}),"Retry"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(r=>t.jsx("div",{className:"card hover:border-primary-orange/40",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-semibold",children:[r.symbol,r.region==="africa"&&t.jsx("span",{className:"ml-2 text-xs bg-primary-gold/20 text-primary-gold px-2 py-1 rounded-full",children:"Africa Focus"})]}),t.jsx("p",{className:"text-sm text-secondary-light",children:r.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-medium",children:window.formatPrice(r.price)}),t.jsxs("p",{className:`text-sm ${r.change>=0?"text-green-500":"text-red-500"}`,children:[r.change>=0?"+":"",r.change.toFixed(2),"%"]})]})]})},r.id))})]})})};export{S as default};
//# sourceMappingURL=LivePrices-4bb0b628.js.map
