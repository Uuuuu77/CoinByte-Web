import{r as m}from"./index-89d22515.js";function C({title:a,titleId:e,...o},t){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":e},o),a?m.createElement("title",{id:e},a):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const D=m.forwardRef(C),E=D,r={baseUrl:"https://api.coingecko.com/api/v3/simple/price",defaultIds:["bitcoin","ethereum","solana","tether","usd-coin","binancecoin","cardano","ripple","celo","stellar","celo-dollar"],vsCurrency:"usd",cacheTTL:3e4,retryConfig:{maxAttempts:3,baseDelay:500,maxDelay:3e3},headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"CoinByte-Web/2.0 (African Markets)"}},f={bitcoin:{name:"Bitcoin",symbol:"BTC",type:"crypto",region:"global"},ethereum:{name:"Ethereum",symbol:"ETH",type:"crypto",region:"global"},tether:{name:"Tether",symbol:"USDT",type:"stablecoin",region:"global"},"usd-coin":{name:"USD Coin",symbol:"USDC",type:"stablecoin",region:"global"},solana:{name:"Solana",symbol:"SOL",type:"crypto",region:"global"},celo:{name:"Celo",symbol:"CELO",type:"crypto",region:"africa"},"celo-dollar":{name:"cUSD",symbol:"cUSD",type:"stablecoin",region:"africa"},binancecoin:{name:"BNB",symbol:"BNB",type:"crypto",region:"global"},ripple:{name:"XRP",symbol:"XRP",type:"crypto",region:"global"},stellar:{name:"Stellar",symbol:"XLM",type:"crypto",region:"africa"}};let n={data:null,timestamp:0,etag:null,regionStats:{africa:{lastUpdated:0,count:0},global:{lastUpdated:0,count:0}}};async function S(a={}){if(n.data&&Date.now()-n.timestamp<r.cacheTTL)return n.data;const o={ids:a.ids||r.defaultIds.join(","),vs_currencies:r.vsCurrency,include_24hr_change:!0,include_last_updated_at:!0,precision:"4"},t=new URL(r.baseUrl);Object.entries(o).forEach(([s,c])=>{t.searchParams.append(s,c)});const d=new Headers(r.headers);n.etag&&d.set("If-None-Match",n.etag);let i,p=0;const{maxAttempts:g,baseDelay:b,maxDelay:h}=r.retryConfig;for(;p<g;)try{if(i=await fetch(t,{headers:d}),i.status===304)return n.timestamp=Date.now(),n.data;if(i.ok)break}catch(s){if(++p===g)throw s;const c=Math.min(b*2**p,h);await new Promise(l=>setTimeout(l,c))}if(!i.ok)throw new Error(`API request failed: ${i.status}`);const w=i.headers.get("ETag"),y=await i.json(),u={africa:0,global:0};return Object.keys(y).forEach(s=>{var l;const c=((l=f[s])==null?void 0:l.region)||"global";u[c]++}),n={data:y,timestamp:Date.now(),etag:w,regionStats:{africa:{lastUpdated:Date.now(),count:u.africa},global:{lastUpdated:Date.now(),count:u.global}}},y}function T(a){return!a||typeof a!="object"?[]:Object.entries(a).map(([e,o])=>{const t=f[e]||{name:e.toUpperCase(),symbol:e.slice(0,4).toUpperCase(),type:"crypto",region:"global"};return{id:e,region:t.region,name:t.name,symbol:t.symbol,type:t.type,price:o[r.vsCurrency]||0,change:o[`${r.vsCurrency}_24h_change`]||0,lastUpdated:o.last_updated_at||Date.now()}}).sort((e,o)=>e.type==="stablecoin"&&o.type!=="stablecoin"?-1:o.type==="stablecoin"&&e.type!=="stablecoin"?1:o.region.localeCompare(e.region))}window.formatPrice=function(a,e="USD",o="en-US"){const t={style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:4};return e==="NGN"&&(t.maximumFractionDigits=2),e==="KES"&&(t.maximumFractionDigits=2),e==="GHS"&&(t.maximumFractionDigits=2),new Intl.NumberFormat(o,t).format(a)};window.refreshCryptoData=function(){n={...n,data:null,timestamp:0,etag:null}};window.reportError=function(a,e="api"){console.error(`[CoinByte Error] ${e}:`,a),typeof window.trackJs<"u"&&window.trackJs.track(a)};export{E as A,T as a,S as f};
//# sourceMappingURL=api-6c4b1da8.js.map
